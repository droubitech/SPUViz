<!DOCTYPE html>
<html>
<head>
  <title>SPUViz</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
  <style type="text/css">
   #map {
       position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
   }
    </style>
</head>

<body>
    <div id="map"></div>
    <!-- Add jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
    integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
    crossorigin=""></script>
    <!-- MAP SCRIPT -->
    <script> 
        // Add AJAX request for data
        var portos = $.ajax({
          url:"https://raw.githubusercontent.com/droubitech/SPUViz/master/portos.geojson",
          dataType: "json",
          success: console.log("Ports data successfully loaded."),
          error: function (xhr) {
            alert(xhr.statusText)
          }
        })
        
        var cessoes = $.ajax({
          url:"https://raw.githubusercontent.com/droubitech/SPUViz/master/cessoes.geojson",
          dataType: "json",
          success: console.log("Cessions data successfully loaded."),
          error: function (xhr) {
            alert(xhr.statusText)
          }
        })
            var cities = L.layerGroup();

            L.marker([-27.675, -51.15]).addTo(cities),
            L.marker([-27.675, -52.15]).addTo(cities),
            L.marker([-27.675, -50.15]).addTo(cities),
            L.marker([-27.675, -49.15]).addTo(cities);

            var OpenStreetMap_DE = L.tileLayer('https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png', {
                maxZoom: 18,
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            });
            OpenTopoMap = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
                maxZoom: 17,
                attribution: 'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
            });

            var wmsLayer = L.tileLayer.wms('http://sigsc.sc.gov.br/sigserver/SIGSC/wms', {
                            layers: 'OrtoRGB-Landsat-2012'
            });

            var map = L.map('map', {
                center: [-27.675, -51.15],
                zoom: 8,
                layers: [OpenTopoMap, wmsLayer, OpenStreetMap_DE]
            });

            var baseLayers = {
                "OpenTopo": OpenTopoMap,
                "SIG-SC": wmsLayer,
                "OpenStreet": OpenStreetMap_DE
                };

            var overlays = {
                "Cidades": cities
            };

            L.control.layers(baseLayers, overlays).addTo(map);

            // loading GeoJSON file - Here my html and usa_adm.geojson file resides in same folder
            $.getJSON("portos.geojson",function(data){
            // L.geoJson function is used to parse geojson file and load on to map
            L.geoJson(data).addTo(map);
          });
    </script>
</body>
</html>
